function n(h,i){if(h.startsWith("rgb")){const r=h.replace(/^rgba?\(|\)$/g,""),[c,o,d,g="1"]=r.split(",").map(p=>p.trim());return`rgba(${c}, ${o}, ${d}, ${Number.parseFloat(g.trim())*i})`}let t=h.replace("#","");t.length===3&&(t=`${t[0]}${t[0]}${t[1]}${t[1]}${t[2]}${t[2]}`);const e=parseInt(t.substring(0,2),16),s=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16);return`rgba(${e}, ${s}, ${a}, ${i})`}export default class v{constructor(i,t){this.container=i,this.width=t.width,this.height=t.height,this.canvas=this.initCanvas(),this.container.appendChild(this.canvas)}initCanvas(){const i=document.createElement("canvas"),t=window.devicePixelRatio||1;return i.width=this.width*t,i.height=this.height*t,i.style.width=`${this.width}px`,i.style.height=`${this.height}px`,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.pointerEvents="none",i}render(i){var e;this.clear();const t=(e=this.canvas)==null?void 0:e.getContext("2d");t&&(t.miterLimit=2,t.textBaseline="middle",i.forEach(s=>{!s.text||(t.fillStyle=n(s.fillColor,s.opacity),t.strokeStyle=n(s.strokeColor,s.opacity),t.font=`${s.fontSize}px roboto`,t.lineWidth=3,t.strokeText(s.text,s.x,s.y),t.lineWidth=6,t.fillText(s.text,s.x,s.y))}))}clear(){var t;const i=(t=this.canvas)==null?void 0:t.getContext("2d");if(i){const e=window.devicePixelRatio||1;i.clearRect(0,0,this.width*e,this.height*e)}}setSize(i,t){if(this.width=i,this.height=t,this.canvas){const e=window.devicePixelRatio||1;this.canvas.width=this.width*e,this.canvas.height=this.height*e,this.canvas.style.width=`${this.width}px`,this.canvas.style.height=`${this.height}px`}}dispose(){this.canvas&&(this.container.removeChild(this.canvas),this.canvas=null)}}
