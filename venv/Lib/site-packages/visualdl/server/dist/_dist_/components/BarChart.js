import*as C from"../utils/chart.js";import s,{useEffect as z,useImperativeHandle as D}from"../../__snowpack__/pkg/react.js";import{primaryColor as I}from"../utils/style.js";import L,{Wrapper as R,useChartTheme as G}from"../hooks/useECharts.js";import H from"../../__snowpack__/pkg/react-spinners/GridLoader.js";import f from"../../__snowpack__/pkg/lodash/defaultsDeep.js";const N=s.forwardRef(({options:o,categories:a,direction:c,data:t,title:e,loading:u,className:h,onInit:_},d)=>{const{ref:g,echart:r,wrapper:x,saveAsImage:y}=L({loading:!!u,autoFit:!0,onInit:_}),l=G();return D(d,()=>({saveAsImage:()=>{y(e)}})),z(()=>{const{color:m,colorAlt:O,series:k,...v}=C,n=c==="horizontal",p={type:"value"},i={type:"category",data:a,axisLabel:{formatter:null}},A=t==null?void 0:t.map((j,w)=>f(j,{itemStyle:{color:m[w%m.length]}},k)),E=f({title:{text:e!=null?e:""},xAxis:n?p:i,yAxis:n?i:p,series:A},o,l,v);r==null||r.setOption(E,{notMerge:!0})},[o,t,e,l,r,c,a]),s.createElement(R,{ref:x,className:h},!r&&s.createElement("div",{className:"loading"},s.createElement(H,{color:I,size:"10px"})),s.createElement("div",{className:"echarts",ref:g}))});export default N;
