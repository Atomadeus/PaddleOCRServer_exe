import*as z from"../utils/chart.js";import a,{useEffect as L,useImperativeHandle as A}from"../../__snowpack__/pkg/react.js";import{primaryColor as j}from"../utils/style.js";import D,{Wrapper as T,useChartTheme as G}from"../hooks/useECharts.js";import I from"../../__snowpack__/pkg/react-spinners/GridLoader.js";import M from"../../__snowpack__/pkg/lodash/defaultsDeep.js";import{useTranslation as R}from"../../__snowpack__/pkg/react-i18next.js";export var XAxisType;(function(o){o.value="value",o.log="log",o.time="time"})(XAxisType||(XAxisType={}));export var YAxisType;(function(o){o.value="value",o.log="log"})(YAxisType||(YAxisType={}));const H=a.forwardRef(({options:o,data:r,title:d,loading:g,zoom:m,className:F,onInit:u,isWorkerName:h,units:l,istotal:y},v)=>{const{i18n:w}=R(),p=["#2932E1","#00CC88","#981EFF","#FF6D6D","#25C9FF","#E71ED5","#FFAA00","#00307D"],{ref:b,echart:i,wrapper:k,saveAsImage:_}=D({loading:!!g,zoom:m,autoFit:!0,onInit:u}),C=G();return A(v,()=>({restore:()=>{i==null||i.dispatchAction({type:"restore"})},saveAsImage:()=>{_(d)}})),L(()=>{const{colorAlt:N,series:O,...W}=z;if(r){const S=h?r.worker_name:r.phase_type,c=r.order,x=[];for(let e=0;e<r.order.length;e++)x.push({name:c[e],type:"bar",stack:"\u6570\u636E",barMaxWidth:38,itemStyle:{color:p[e]},emphasis:{focus:"series"},data:r.data[e]});const E=M(o,{tooltip:{trigger:"axis",extraCssText:"padding:15px;padding-right:41px;line-height:30px;width:auto;height:auto;background:rgba(0,0,0,0.75);box-shadow:1px 5px 20px 0px rgba(1,11,19,0.2);border-radius:6px;border:none;",axisPointer:{type:"shadow"},formatter:function(e){let n=0;for(let s=0;s<e.length;s++)n+=e[s].data;n=Number(n.toFixed(2));let t="";t+='<div style="font-size:16px;color:#FFFFFF;font-weight:500;margin-left:17px;">'+e[0].axisValue+"</div>",t+='<div class="tooltipContent">',t+='<div class="tooltipitems" style=" display: flex;align-items:center;">',y||(t+='<span style="display:inline-block;margin-right:5px;width:12px;height:12px;border-width:2px;background-color:#2932E1;" class="ant-radio-inner ant-radio-checked"></span><span style="color: #FFFFFF;">total</span></span> : <span style="color: #FFFFFF;">'+n+l+"</span>"),t+="</div>",t+="</div>";for(let s=0;s<e.length;s++){const f=e[s];t+='<div class="tooltipitems">',t+='<span style="font-size:12px;display:inline-block;margin-right:5px;width:12px;height:12px;border-radius:50%;background-color:'+p[s]+';"></span><span style=" font-size:12px;color: #FFFFFF;">'+c[s]+'</span></span> : <span style="font-size:12px; color: #FFFFFF;">'+f.data+l+"</span>",t+="</div>"}return t+="</div>",t}},legend:{data:c,top:0,right:0,itemGap:14,textStyle:{fontSize:14,color:"#666666"},icon:"path://M14.5,0h-12C1.1,0,0,1.1,0,2.5S1.1,5,2.5,5h12C15.9,5,17,3.9,17,2.5S15.9,0,14.5,0z",itemWidth:17,itemHeight:5},grid:{left:"0",right:"0",bottom:"0",top:"62",containLabel:!0},xAxis:[{type:"category",data:S,axisLine:{lineStyle:{color:"#ccc"}},axisTick:{show:!1},splitArea:{show:!1},splitLine:{show:!1},axisLabel:{fontSize:12,color:"#666666"}}],yAxis:{name:"",nameTextStyle:{fontSize:12,color:"#999999"},type:"value",axisLine:{show:!0,lineStyle:{color:"#ccc"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{opacity:.3}},axisLabel:{fontSize:12,color:"#666666"}},series:x});i==null||i.setOption(E,{notMerge:!0})}},[o,r,p,d,C,w.language,i,h,l]),a.createElement(T,{ref:k,className:F},!i&&a.createElement("div",{className:"loading"},a.createElement(I,{color:j,size:"10px"})),a.createElement("div",{className:"echarts",ref:b}))});export default H;
