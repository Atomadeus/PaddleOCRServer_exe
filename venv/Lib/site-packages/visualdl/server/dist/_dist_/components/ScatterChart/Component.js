import C,{useEffect as o,useImperativeHandle as L,useRef as p}from"../../../__snowpack__/pkg/react.js";import P from"./Labels/index.js";import S from"./Points/index.js";import E from"../../../__snowpack__/pkg/styled-components.js";import{themes as H}from"../../utils/theme.js";import T from"../../hooks/useTheme.js";const d=E.div`
    position: relative;
    filter: ${n=>n.dark?"invert(99%) sepia(7%) saturate(5670%) hue-rotate(204deg) brightness(96%) contrast(79%)":""};
`,R=C.forwardRef(({width:n,height:u,data:f,labels:i,colorMap:k,is3D:s,rotate:_,focusedIndices:c,highlightIndices:m,type:t,className:v},w)=>{const x=T(),l=p(null),e=p(null),a=p({width:n,height:u,is3D:s,background:H.light.backgroundColor});return o(()=>{if(l.current)return t==="points"?e.current=new S(l.current,a.current):t==="labels"?e.current=new P(l.current,a.current):e.current=null,()=>{var r;(r=e.current)==null||r.dispose()}},[t]),o(()=>{var r,j,b;a.current.is3D=s,(r=e.current)==null||r.setDimension(s),s&&(_?(j=e.current)==null||j.startRotate():(b=e.current)==null||b.stopRotate())},[s,_]),o(()=>{var r;(r=e.current)==null||r.setData(f,i,k)},[f,i,k,t]),o(()=>{var r;(r=e.current)==null||r.setFocusedPointIndices(c!=null?c:[])},[c,t]),o(()=>{var r;(r=e.current)==null||r.setHighLightIndices(m!=null?m:[])},[m,t]),o(()=>{var r;a.current.width=n,a.current.height=u,(r=e.current)==null||r.setSize(n,u)},[n,u,t]),L(w,()=>({reset:()=>{var r;(r=e.current)==null||r.reset()}})),C.createElement(d,{className:v,ref:l,dark:x==="dark"})});R.displayName="ScatterChart";export default R;
