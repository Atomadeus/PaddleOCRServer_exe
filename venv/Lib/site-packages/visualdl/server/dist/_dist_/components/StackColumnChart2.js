import*as E from"../utils/chart.js";import i,{useEffect as z,useImperativeHandle as A}from"../../__snowpack__/pkg/react.js";import{primaryColor as L}from"../utils/style.js";import D,{Wrapper as j,useChartTheme as T}from"../hooks/useECharts.js";import I from"../../__snowpack__/pkg/react-spinners/GridLoader.js";import M from"../../__snowpack__/pkg/lodash/defaultsDeep.js";import{useTranslation as G}from"../../__snowpack__/pkg/react-i18next.js";export var XAxisType;(function(o){o.value="value",o.log="log",o.time="time"})(XAxisType||(XAxisType={}));export var YAxisType;(function(o){o.value="value",o.log="log"})(YAxisType||(YAxisType={}));const c=["#2932E1","#00CC88","#981EFF","#FF6D6D","#25C9FF","#E71ED5","#FFAA00","#00307D"],R=i.forwardRef(({options:o,data:a,title:d,loading:g,zoom:m,className:u,onInit:F,isWorkerName:h,units:n},y)=>{const{i18n:w}=G(),{ref:b,echart:s,wrapper:v,saveAsImage:k}=D({loading:!!g,zoom:m,autoFit:!0,onInit:F}),_=T();return A(y,()=>({restore:()=>{s==null||s.dispatchAction({type:"restore"})},saveAsImage:()=>{k(d)}})),z(()=>{const{colorAlt:W,series:H,...N}=E;if(a){const C=h?a.worker_name:a.phase_type,p=a.order,f=[];for(let e=0;e<a.order.length;e++)f.push({name:p[e],type:"bar",stack:"\u6570\u636E",barMaxWidth:38,itemStyle:{color:c[e]},emphasis:{focus:"series"},data:a.data[e]});const S=M(o,{tooltip:{trigger:"axis",extraCssText:"padding:15px;padding-right:41px;line-height:30px;width:auto;height:auto;background:rgba(0,0,0,0.75);box-shadow:1px 5px 20px 0px rgba(1,11,19,0.2);border-radius:6px;border:none;",axisPointer:{type:"shadow"},formatter:function(e){let l=0;for(let r=0;r<e.length;r++)l+=e[r].data;l=Number(l.toFixed(2));let t="";t+='<div style="font-size:16px;color:#FFFFFF;font-weight:500;margin-left:17px;">'+e[0].axisValue+"</div>",t+='<div class="tooltipContent">',t+='<div class="tooltipitems" style=" display: flex;align-items:center;">',t+='<span style="display:inline-block;margin-right:5px;width:12px;height:12px;border-width:2px;background-color:#2932E1;" class="ant-radio-inner ant-radio-checked"></span><span style="color: #FFFFFF;">total</span></span> : <span style="color: #FFFFFF;">'+l+n+"</span>",t+="</div>",t+="</div>";for(let r=0;r<e.length;r++){const x=e[r];t+='<div class="tooltipitems">',t+='<span style="font-size:12px;display:inline-block;margin-right:5px;width:12px;height:12px;border-radius:50%;background-color:'+c[r]+';"></span><span style=" font-size:12px;color: #FFFFFF;">'+p[r]+'</span></span> : <span style="font-size:12px; color: #FFFFFF;">'+x.data+n+"</span>",t+="</div>"}return t+="</div>",t}},legend:{data:p,top:0,right:0,itemGap:14,textStyle:{fontSize:14,color:"#666666"},icon:"path://M14.5,0h-12C1.1,0,0,1.1,0,2.5S1.1,5,2.5,5h12C15.9,5,17,3.9,17,2.5S15.9,0,14.5,0z",itemWidth:17,itemHeight:5},grid:{left:"0",right:"0",bottom:"30",top:"62",containLabel:!0},xAxis:[{type:"category",data:C,axisLine:{lineStyle:{color:"#ccc"}},axisTick:{show:!1},splitArea:{show:!1},splitLine:{show:!1},axisLabel:{fontSize:12,color:"#666666"}}],yAxis:{name:"",nameTextStyle:{fontSize:12,color:"#999999"},type:"value",axisLine:{show:!0,lineStyle:{color:"#ccc"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{opacity:.3}},axisLabel:{fontSize:12,color:"#666666"}},dataZoom:[{start:0,end:20,type:"slider",show:!0,xAxisIndex:[0],handleSize:0,height:8,left:50,right:40,bottom:10,handleStyle:{borderColor:"#cacaca",borderWidth:1,shadowBlur:2,shadowColor:"#ddd"},fillerColor:"#2932E1",backgroundColor:"#ddd",showDataShadow:!1,showDetail:!1,filterMode:"filter"}],series:f});s==null||s.setOption(S,{notMerge:!0})}},[o,a,c,d,_,w.language,s,h,n]),i.createElement(j,{ref:v,className:u},!s&&i.createElement("div",{className:"loading"},i.createElement(I,{color:L,size:"10px"})),i.createElement("div",{className:"echarts",ref:b}))});export default R;
