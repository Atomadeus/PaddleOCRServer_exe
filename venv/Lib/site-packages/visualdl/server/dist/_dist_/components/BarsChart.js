import r,{useEffect as L,useImperativeHandle as j}from"../../__snowpack__/pkg/react.js";import{primaryColor as A}from"../utils/style.js";import z,{Wrapper as R,useChartTheme as W}from"../hooks/useECharts.js";import T from"../../__snowpack__/pkg/react-spinners/GridLoader.js";import G from"../../__snowpack__/pkg/lodash/defaultsDeep.js";import{useTranslation as f}from"../../__snowpack__/pkg/react-i18next.js";export var XAxisType;(function(e){e.value="value",e.log="log",e.time="time"})(XAxisType||(XAxisType={}));export var YAxisType;(function(e){e.value="value",e.log="log"})(YAxisType||(YAxisType={}));const I=r.forwardRef(({options:e,data:i,title:d,loading:h,zoom:x,className:F,onInit:v,text:s,isLegend:m,units:g},C)=>{const{i18n:y}=f(),{t:l}=f(["profiler","common"]),{ref:b,echart:t,wrapper:w,saveAsImage:_}=z({loading:!!h,zoom:x,autoFit:!0,onInit:v}),k=W();return j(C,()=>({restore:()=>{t==null||t.dispatchAction({type:"restore"})},saveAsImage:()=>{_(d)}})),L(()=>{if(i){const n=i,E=["#2932E1","#00CC88","#981EFF","#FF6D6D","#25C9FF","#E71ED5","#FFAA00","#00307D"],S=s===1?l("Number-calls"):s===2?l("duration")+`(${g})`:l("Overall-proportion")+"(%)",u=[];for(let o=0;o<n.value.length;o++)u.push({value:n.value[o],itemStyle:{color:E[o]}});const D=G({title:{bottom:"5%",left:"center",show:!0,text:S,textStyle:{color:"#666666",fontStyle:"PingFangSC-Regular",fontWeight:"400",fontSize:12}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},extraCssText:"padding:15px;padding-right:41px;line-height:30px;width:auto;height:auto;background:rgba(0,0,0,0.75);box-shadow:1px 5px 20px 0px rgba(1,11,19,0.2);border-radius:6px;border:none;",formatter:function(o){let a="";a+='<div style="font-size:14px;color:#FFFFFF;font-weight:500;margin-left:17px;">'+o[0].name+"</div>",a+='<div class="tooltipContent">';for(let p=0;p<o.length;p++){const c=o[p];a+='<div class="tooltipitems">',a+='<span style="font-size:12px;display:inline-block;margin-right:5px;width:12px;height:12px;border-radius:50%;background-color:'+c.color+';"></span><span style="color: #FFFFFF;">'+c.name+'</span></span> : <span style="color: #FFFFFF;">'+c.data.value+"</span>",a+="</div>"}return a+="</div>",a}},legend:{show:m,data:["Kernel","Memcpy","Memset","Communication","Runtime"],top:0,right:0,itemGap:20,textStyle:{fontSize:14,color:"#666666"},itemWidth:17,itemHeight:5},grid:{left:"0",right:"0",top:"4",bottom:"50",containLabel:!0},xAxis:[{type:"category",data:n.key,axisTick:{alignWithLabel:!1,show:!1},axisLabel:{show:!1},axisLine:{lineStyle:{color:"#CCCCCC"}}}],yAxis:[{type:"value",axisTick:{show:!1},axisLabel:{color:"#666666"},axisLine:{lineStyle:{color:"#CCCCCC"}}}],series:[{type:"bar",barWidth:"30%",data:u}]});t==null||t.setOption(D,{notMerge:!0})}},[e,i,d,k,y.language,t,m,g,s]),r.createElement(R,{ref:w,className:F},!t&&r.createElement("div",{className:"loading"},r.createElement(T,{color:A,size:"10px"})),r.createElement("div",{className:"echarts",ref:b}))});export default I;
