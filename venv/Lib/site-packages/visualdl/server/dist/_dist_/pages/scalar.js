import V from"../components/ChartPage.js";import e,{useCallback as $,useEffect as Q,useMemo as k,useState as o}from"../../__snowpack__/pkg/react.js";import X,{Loader as q}from"../components/ScalarPage/ScalarChart.js";import{XAxis as I,parseSmoothing as x,sortingMethod as _}from"../resource/scalar/index.js";import{AsideSection as d}from"../components/Aside.js";import f from"../components/Checkbox.js";import z from"../components/Content.js";import B from"../components/Error.js";import s from"../components/Field.js";import G from"../components/RunAside.js";import H from"../components/Select.js";import J from"../components/Slider.js";import K from"../components/TimeModeSelect.js";import N from"../components/Title.js";import{rem as y}from"../utils/style.js";import U from"../../__snowpack__/pkg/styled-components.js";import W from"../hooks/useLocalStorage.js";import Y from"../hooks/useQuery.js";import Z from"../hooks/useTagFilter.js";import{useTranslation as ee}from"../../__snowpack__/pkg/react-i18next.js";const te=U.div`
    margin-top: ${y(20)};
    display: flex;
    align-items: center;

    > :last-child {
        margin-left: ${y(20)};
        flex-shrink: 1;
        flex-grow: 1;
    }
`,oe=()=>{const{t}=ee(["scalar","common"]),u=Y(),[r,T]=o(!0),{runs:h,tags:w,selectedRuns:S,onChangeRuns:E,loading:l}=Z("scalar",r),[j,C]=W("scalar_smoothing"),A=k(()=>u.smoothing!=null?x(u.smoothing):x(j),[u.smoothing,j]),[n,F]=o(A);Q(()=>C(String(n)),[n,C]);const[a,M]=o(I.Step),[m,R]=o(_[0]),[c,b]=o(!1),[i,v]=o(!1),[g,L]=o(!1),O=k(()=>e.createElement(G,{runs:h,selectedRuns:S,onChangeRuns:E,running:r,onToggleRunning:T,loading:l},e.createElement(d,null,e.createElement(s,null,e.createElement(f,{checked:c,onChange:b},t("scalar:ignore-outliers"))),e.createElement(s,null,e.createElement(f,{checked:g,onChange:L},t("scalar:show-most-value"))),e.createElement(te,null,e.createElement("span",null,t("scalar:tooltip-sorting")),e.createElement(H,{list:_.map(p=>({label:t(`scalar:tooltip-sorting-value.${p}`),value:p})),value:m,onChange:R}))),e.createElement(d,null,e.createElement(s,{label:t("scalar:smoothing")},e.createElement(J,{min:0,max:.99,step:.01,value:n,onChangeComplete:F})),e.createElement(s,null,e.createElement(f,{checked:i,onChange:v},t("scalar:smoothed-data-only")))),e.createElement(d,null,e.createElement(s,{label:t("scalar:x-axis")},e.createElement(K,{value:a,onChange:M})))),[c,l,E,r,h,S,g,i,n,t,m,a]),D=$(({label:p,runs:P})=>e.createElement(X,{runs:P,tag:p,smoothing:n,xAxis:a,sortingMethod:m,outlier:c,smoothedOnly:i,showMostValue:g,running:r}),[n,a,m,c,g,i,r]);return e.createElement(e.Fragment,null,e.createElement(N,null,t("common:scalar")),e.createElement(z,{aside:O},!l&&!h.length?e.createElement(B,null):e.createElement(V,{items:w,renderChart:D,loader:e.createElement(q,null),loading:l})))};export default oe;
