import g,{Loader as C}from"../../components/SamplePage/Audio.js";import f from"../../components/ChartPage.js";import e,{useCallback as E,useEffect as h,useMemo as j,useRef as R,useState as w}from"../../../__snowpack__/pkg/react.js";import A from"../../components/Content.js";import _ from"../../components/Error.js";import k from"../../components/RunAside.js";import x from"../../components/Title.js";import T from"../../hooks/useTagFilter.js";import{useTranslation as S}from"../../../__snowpack__/pkg/react-i18next.js";const F=()=>{const{t:m}=S(["sample","common"]),r=R();h(()=>{const a=window.AudioContext||window.webkitAudioContext;return r.current=new a,()=>{var o;(o=r.current)==null||o.close()}},[]);const[t,c]=w(!0),{runs:s,tagsWithSingleRun:l,selectedRuns:i,onChangeRuns:u,loading:n}=T("audio",t),p=j(()=>e.createElement(k,{runs:s,selectedRuns:i,onChangeRuns:u,running:t,onToggleRunning:c,loading:n}),[n,u,t,s,i]),d=E(({run:a,label:o})=>e.createElement(g,{audioContext:r.current,run:a,tag:o,running:t}),[t]);return e.createElement(e.Fragment,null,e.createElement(x,null,m("common:audio")," - ",m("common:sample")),e.createElement(A,{aside:p},!n&&!s.length?e.createElement(_,null):e.createElement(f,{items:l,renderChart:d,loader:e.createElement(C,null),loading:n})))};export default F;
