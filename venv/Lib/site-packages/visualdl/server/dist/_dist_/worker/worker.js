import{callListener as n,pushFunctionToListener as r,removeFunctionFromListener as o,runner as l}from"./utils.js";class c{constructor(){this.listeners={},this.onceListeners={},this.env={},self.addEventListener("message",this.listener.bind(this))}listener(e){n.call(this,this.onceListeners,e.data),n.call(this,this.listeners,e.data),delete this.onceListeners[e.data.type]}emit(e,s){self.postMessage({type:e,data:s})}on(e,s){r(this.listeners,e,s)}off(e,s){o(this.listeners,e,s),o(this.onceListeners,e,s)}once(e,s){r(this.onceListeners,e,s)}}const t=new c;t.once("INITIALIZE",({name:i,env:e})=>{t.env=e,l(i,t)});
