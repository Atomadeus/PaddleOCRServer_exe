import x,{Pages as e}from"../routes/index.js";import{useEffect as d,useMemo as h,useState as C}from"../../__snowpack__/pkg/react.js";import p from"../utils/event.js";import j from"./useRequest.js";import{useTranslation as y}from"../../__snowpack__/pkg/react-i18next.js";export const navMap={scalar:e.Scalar,histogram:e.Histogram,image:e.Image,audio:e.Audio,text:e.Text,graph:e.Graph,embeddings:e.HighDimensional,pr_curve:e.PRCurve,roc_curve:e.ROCCurve,hyper_parameters:e.HyperParameter};const O=()=>{const{t:s}=y("common"),[v,_]=C(15*1e3),{data:n,loading:I,error:R,mutate:o}=j("/components",{refreshInterval:v,dedupingInterval:14*1e3,errorRetryInterval:15*1e3,errorRetryCount:Number.POSITIVE_INFINITY,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshWhenHidden:!1,refreshWhenOffline:!1});d(()=>(p.on("refresh",o),()=>{p.off("refresh",o)}),[o]);const u=h(()=>{var t;return(t=n==null?void 0:n.map(a=>navMap[a]))!=null?t:[]},[n]),i=h(()=>{const t=(a,l)=>{const g=l?s(l.id)+" - ":"";return a.reduce((c,r)=>{const m=g+s(r.id);if(r.children){const f=t(r.children,r);f.length&&c.push({...r,name:m,children:f})}else r.visible!==!1&&c.push({...r,inactive:!u.includes(r.id),name:m,children:void 0});return c},[])};return t(x)},[u,s]);return d(()=>_((i.length?61:15)*1e3),[i]),[i,I,R]};export default O;
