import{r as g}from"./common/index-78959ebc.js";import"./common/_commonjsHelpers-b3efd043.js";var ve=Object.prototype.hasOwnProperty;function re(e,i){var t,r;if(e===i)return!0;if(e&&i&&(t=e.constructor)===i.constructor){if(t===Date)return e.getTime()===i.getTime();if(t===RegExp)return e.toString()===i.toString();if(t===Array){if((r=e.length)===i.length)for(;r--&&re(e[r],i[r]););return r===-1}if(!t||typeof e=="object"){r=0;for(t in e)if(ve.call(e,t)&&++r&&!ve.call(i,t)||!(t in i)||!re(e[t],i[t]))return!1;return Object.keys(i).length===r}}return e!==e&&i!==i}function ge(e,i,t,r){return new(t||(t=Promise))(function(n,a){function o(f){try{v(r.next(f))}catch(u){a(u)}}function d(f){try{v(r.throw(f))}catch(u){a(u)}}function v(f){var u;f.done?n(f.value):(u=f.value,u instanceof t?u:new t(function(l){l(u)})).then(o,d)}v((r=r.apply(e,i||[])).next())})}function he(e,i){var t,r,n,a,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function d(v){return function(f){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(n=2&u[0]?r.return:u[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,u[1])).done)return n;switch(r=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){o.label=u[1];break}if(u[0]===6&&o.label<n[1]){o.label=n[1],n=u;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(u);break}n[2]&&o.ops.pop(),o.trys.pop();continue}u=i.call(e,o)}catch(l){u=[6,l],r=0}finally{t=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([v,f])}}}var R={}[0],p=function(e){return e===R},$=function(e){return typeof e=="function"},H=function(){},W=function(e,i){return Object.assign({},e,i)},ne=!0,We=typeof window!="undefined",pe=typeof document!="undefined",ie=We&&window.addEventListener||H,De=pe&&document.addEventListener||H,ye={isOnline:function(){return ne},isVisible:function(){var e=pe&&document.visibilityState;return!!p(e)||e!=="hidden"}},Fe={initFocus:function(e){De("visibilitychange",e),ie("focus",e)},initReconnect:function(e){ie("online",function(){ne=!0,e()}),ie("offline",function(){ne=!1})}},G=typeof window=="undefined"||"Deno"in window,me=G?null:window.requestAnimationFrame,Le=me?function(e){return me(e)}:function(e){return setTimeout(e,1)},X=G?g.useEffect:g.useLayoutEffect,ue=typeof navigator!="undefined"&&navigator.connection,be=!G&&ue&&(["slow-2g","2g"].includes(ue.effectiveType)||ue.saveData),ae=new WeakMap,we=0;function Re(e){if($(e))try{e=e()}catch(t){e=""}var i;return Array.isArray(e)?(i=e,e=function(t){if(!t.length)return"";for(var r="arg",n=0;n<t.length;++n){var a=t[n],o=R;a===null||typeof a!="object"&&!$(a)?o=JSON.stringify(a):ae.has(a)?o=ae.get(a):(o=we,ae.set(a,we++)),r+="$"+o}return r}(e)):i=[e=String(e||"")],[e,i,e?"$err$"+e:"",e?"$req$"+e:""]}var J=new WeakMap,N=function(e,i,t,r,n,a){a===void 0&&(a=!1);var o=J.get(e),d=o[0],v=o[1],f=d[i],u=v[i];if(u)for(var l=0;l<u.length;++l)u[l](t,r,n);return a&&f&&f[0]?f[0](2).then(function(){return e.get(i)}):e.get(i)},qe=0,oe=function(){return++qe},Oe=function(e,i,t,r){return r===void 0&&(r=!0),ge(void 0,void 0,void 0,function(){var n,a,o,d,v,f,u,l,_,z,F;return he(this,function(S){switch(S.label){case 0:if(n=Re(i),a=n[0],o=n[2],!a)return[2];if(d=J.get(e),v=d[2],f=d[3],p(t))return[2,N(e,a,e.get(a),e.get(o),R,r)];if(_=v[a]=oe(),f[a]=0,$(t))try{t=t(e.get(a))}catch(D){t=R,l=D}if(!t||!$(t.then))return[3,5];S.label=1;case 1:return S.trys.push([1,3,,4]),[4,t];case 2:return u=S.sent(),[3,4];case 3:return z=S.sent(),l=z,[3,4];case 4:if(_!==v[a]){if(l)throw l;return[2,u]}return[3,6];case 5:u=t,S.label=6;case 6:return p(u)||e.set(a,u),e.set(o,l),f[a]=oe(),[4,N(e,a,u,l,R,r)];case 7:if(F=S.sent(),l)throw l;return[2,F]}})})};function ke(e,i){for(var t in e)e[t][0]&&e[t][0](i)}function Se(e,i){if(!J.has(e)){var t=W(Fe,i),r={},n=Oe.bind(R,e);return J.set(e,[r,{},{},{},{},{},n]),G||(t.initFocus(ke.bind(R,r,0)),t.initReconnect(ke.bind(R,r,1))),[e,n]}}var Ve=Se(new Map),xe=Ve[0],Ae=Ve[1],ce=W({onLoadingSlow:H,onSuccess:H,onError:H,onErrorRetry:function(e,i,t,r,n){if(ye.isVisible()){var a=t.errorRetryCount,o=n.retryCount,d=~~((Math.random()+.5)*(1<<(o<8?o:8)))*t.errorRetryInterval;!p(a)&&o>a||setTimeout(r,d,n)}},revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:be?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:be?5e3:3e3,compare:re,isPaused:function(){return!1},cache:xe,mutate:Ae,fallback:{}},ye);function Te(e,i){var t=W(e,i);if(!i)return t;var r=e.use,n=e.fallback,a=i.use,o=i.fallback;return r&&a&&(t.use=r.concat(a)),n&&o&&(t.fallback=W(n,o)),t}var Z=g.createContext({});function Me(e){return $(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}]}var Ee,Ce=function(e,i,t){var r=i[e]||(i[e]=[]);return r.push(t),function(){var n=r.indexOf(t);n>=0&&(r[n]=r[r.length-1],r.pop())}},fe={dedupe:!0},$e=Object.defineProperty(function(e){var i=e.children,t=e.value,r=Te(g.useContext(Z),t),n=t&&t.provider,a=g.useState(function(){return n?Se(n(r.cache||xe),t):R})[0];return a&&(r.cache=a[0],r.mutate=a[1]),g.createElement(Z.Provider,{value:r},i)},"default",{value:ce}),He=(Ee=function(e,i,t){var r=t.cache,n=t.compare,a=t.fallbackData,o=t.suspense,d=t.revalidateOnMount,v=t.refreshInterval,f=t.refreshWhenHidden,u=t.refreshWhenOffline,l=J.get(r),_=l[0],z=l[1],F=l[2],S=l[3],D=l[4],L=l[5],B=Re(e),c=B[0],je=B[1],Q=B[2],K=B[3],q=g.useRef(!1),A=g.useRef(!1),U=g.useRef(c),le=g.useRef(t),m=function(){return le.current},se=r.get(c),Ie=p(a)?t.fallback[c]:a,E=p(se)?Ie:se,M=r.get(Q);if(o&&(!c||!i))throw new Error("useSWR requires either key or fetcher with suspense mode");var de=function(){return p(d)?o?!q.current&&!p(E):p(E)||t.revalidateIfStale:d},Y=!(!c||!i)&&(!!r.get(K)||!q.current&&de()),ee=function(y,s){var b=g.useState({})[1],V=g.useRef(y),C=g.useRef({data:!1,error:!1,isValidating:!1}),x=g.useCallback(function(h){var O=!1,k=V.current;for(var T in h){var w=T;k[w]!==h[w]&&(k[w]=h[w],C.current[w]&&(O=!0))}O&&!s.current&&b({})},[]);return X(function(){V.current=y}),[V,C.current,x]}({data:E,error:M,isValidating:Y},A),j=ee[0],te=ee[1],I=ee[2],P=g.useCallback(function(y){return ge(void 0,void 0,void 0,function(){var s,b,V,C,x,h,O,k,T;return he(this,function(w){switch(w.label){case 0:if(!c||!i||A.current||m().isPaused())return[2,!1];V=!0,C=y||{},x=!p(D[c])&&C.dedupe,h=function(){return!A.current&&c===U.current&&q.current},O=function(){delete D[c],delete L[c]},w.label=1;case 1:return w.trys.push([1,6,,7]),r.set(K,!0),I({isValidating:!0}),x||N(r,c,j.current.data,j.current.error,!0),x?(b=L[c],[4,D[c]]):[3,3];case 2:return s=w.sent(),[3,5];case 3:return t.loadingTimeout&&!r.get(c)&&setTimeout(function(){V&&h()&&m().onLoadingSlow(c,t)},t.loadingTimeout),L[c]=b=oe(),[4,D[c]=i.apply(i,je)];case 4:s=w.sent(),setTimeout(function(){L[c]===b&&O()},t.dedupingInterval),h()&&m().onSuccess(s,c,t),w.label=5;case 5:return L[c]!==b?[2,!1]:(r.set(Q,R),r.set(K,!1),k={isValidating:!1},!p(F[c])&&(b<=F[c]||b<=S[c]||S[c]===0)?(I(k),[2,!1]):(p(j.current.error)||(k.error=R),n(j.current.data,s)||(k.data=s),n(r.get(c),s)||r.set(c,s),I(k),x||N(r,c,s,k.error,!1),[3,7]));case 6:return T=w.sent(),O(),r.set(K,!1),m().isPaused()?(I({isValidating:!1}),[2,!1]):(r.set(Q,T),j.current.error!==T&&(I({isValidating:!1,error:T}),x||N(r,c,R,T,!1)),h()&&(m().onError(T,c,t),t.shouldRetryOnError&&m().onErrorRetry(T,c,t,P,{retryCount:(C.retryCount||0)+1,dedupe:!0})),[3,7]);case 7:return V=!1,[2,!0]}})})},[c]),Pe=g.useCallback(function(y,s){return Oe(r,U.current,y,s)},[]);if(X(function(){le.current=t}),X(function(){if(c){var y=q.current,s=P.bind(R,fe),b=function(){return m().isVisible()&&m().isOnline()},V=0,C=Ce(c,z,function(h,O,k){I(W({error:O,isValidating:k},n(h,j.current.data)?null:{data:h}))}),x=Ce(c,_,function(h){if(h===0){var O=Date.now();m().revalidateOnFocus&&O>V&&b()&&(V=O+m().focusThrottleInterval,s())}else if(h===1)m().revalidateOnReconnect&&b()&&s();else if(h===2)return P()});return A.current=!1,U.current=c,y&&I({data:E,error:M,isValidating:Y}),de()&&(p(E)||G?s():Le(s)),q.current=!0,function(){A.current=!0,C(),x()}}},[c,P]),X(function(){var y;function s(){v&&y!==-1&&(y=setTimeout(b,v))}function b(){j.current.error||!f&&!m().isVisible()||!u&&!m().isOnline()?s():P(fe).then(function(){return s()})}return s(),function(){y&&(clearTimeout(y),y=-1)}},[v,f,u,P]),g.useDebugValue(E),o&&p(E))throw p(M)?P(fe):M;return{mutate:Pe,get data(){return te.data=!0,E},get error(){return te.error=!0,M},get isValidating(){return te.isValidating=!0,Y}}},function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var t=Me(e),r=t[0],n=t[1],a=t[2],o=W(ce,g.useContext(Z)),d=Te(o,a),v=Ee,f=d.use;if(f)for(var u=f.length;u-- >0;)v=f[u](v);return v(r,n||d.fetcher,d)}),Ge=function(){return W(ce,g.useContext(Z))};export default He;export{$e as SWRConfig,Ge as useSWRConfig};
