function k(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function f(a,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}}function S(a,t,e){return t&&f(a.prototype,t),e&&f(a,e),a}var c=[],w=c.forEach,y=c.slice;function x(a){return w.call(y.call(arguments,1),function(t){if(t)for(var e in t)a[e]===void 0&&(a[e]=t[e])}),a}var g=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,b=function(t,e,o){var n=o||{};n.path=n.path||"/";var r=encodeURIComponent(e),i=t+"="+r;if(n.maxAge>0){var l=n.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");i+="; Max-Age="+Math.floor(l)}if(n.domain){if(!g.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!g.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite){var m=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(m){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i},d={create:function(t,e,o,n){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};o&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+o*60*1e3)),n&&(r.domain=n),document.cookie=b(t,encodeURIComponent(e),r)},read:function(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove:function(t){this.create(t,"",-1)}},L={name:"cookie",lookup:function(t){var e;if(t.lookupCookie&&typeof document!="undefined"){var o=d.read(t.lookupCookie);o&&(e=o)}return e},cacheUserLanguage:function(t,e){e.lookupCookie&&typeof document!="undefined"&&d.create(e.lookupCookie,t,e.cookieMinutes,e.cookieDomain,e.cookieOptions)}},C={name:"querystring",lookup:function(t){var e;if(typeof window!="undefined")for(var o=window.location.search.substring(1),n=o.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("=");if(i>0){var l=n[r].substring(0,i);l===t.lookupQuerystring&&(e=n[r].substring(i+1))}}return e}},u=null,h=function(){if(u!==null)return u;try{u=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch(e){u=!1}return u},I={name:"localStorage",lookup:function(t){var e;if(t.lookupLocalStorage&&h()){var o=window.localStorage.getItem(t.lookupLocalStorage);o&&(e=o)}return e},cacheUserLanguage:function(t,e){e.lookupLocalStorage&&h()&&window.localStorage.setItem(e.lookupLocalStorage,t)}},s=null,p=function(){if(s!==null)return s;try{s=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch(e){s=!1}return s},D={name:"sessionStorage",lookup:function(t){var e;if(t.lookupSessionStorage&&p()){var o=window.sessionStorage.getItem(t.lookupSessionStorage);o&&(e=o)}return e},cacheUserLanguage:function(t,e){e.lookupSessionStorage&&p()&&window.sessionStorage.setItem(e.lookupSessionStorage,t)}},U={name:"navigator",lookup:function(t){var e=[];if(typeof navigator!="undefined"){if(navigator.languages)for(var o=0;o<navigator.languages.length;o++)e.push(navigator.languages[o]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return e.length>0?e:void 0}},T={name:"htmlTag",lookup:function(t){var e,o=t.htmlTag||(typeof document!="undefined"?document.documentElement:null);return o&&typeof o.getAttribute=="function"&&(e=o.getAttribute("lang")),e}},A={name:"path",lookup:function(t){var e;if(typeof window!="undefined"){var o=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(o instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof o[t.lookupFromPathIndex]!="string")return;e=o[t.lookupFromPathIndex].replace("/","")}else e=o[0].replace("/","")}return e}},E={name:"subdomain",lookup:function(t){var e;if(typeof window!="undefined"){var o=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);o instanceof Array&&(typeof t.lookupFromSubdomainIndex=="number"?e=o[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):e=o[0].replace("http://","").replace("https://","").replace(".",""))}return e}};function F(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var v=function(){function a(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k(this,a),this.type="languageDetector",this.detectors={},this.init(t,e)}return S(a,[{key:"init",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=x(o,this.options||{},F()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(L),this.addDetector(C),this.addDetector(I),this.addDetector(D),this.addDetector(U),this.addDetector(T),this.addDetector(A),this.addDetector(E)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var o=this;e||(e=this.options.order);var n=[];return e.forEach(function(r){if(o.detectors[r]){var i=o.detectors[r].lookup(o.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,o){var n=this;o||(o=this.options.caches),!!o&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||o.forEach(function(r){n.detectors[r]&&n.detectors[r].cacheUserLanguage(e,n.options)}))}}]),a}();v.type="languageDetector";export default v;
